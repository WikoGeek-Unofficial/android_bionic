#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 0
#define BAT_NTC_47 0
#define TINNO_NTC_10 1

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   30000	
#endif

#if (TINNO_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   30000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (TINNO_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-30,124607},
        {-25,94918},
        {-20,73035},
        {-15,56734},
        {-10,44468},
        { -5,35150},
        {  0,28008},
        {  5,22486},
        { 10,18182},
        { 15,14803},
        { 20,12129},
        { 25,10000},
        { 30,8292},
        { 35,6914},
        { 40,5795},
        { 45,4872},
        { 50,4101},
        { 55,3467},
        { 60,2936},
        { 65,2494},
        { 70,2130},
        { 75,1817},
        { 80,1562}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0  , 4155  },        
	{2  , 4135  },        
	{4  , 4098  },        
	{6  , 4052  },        
	{8  , 4018  },        
	{10  ,3996  },       
	{12  ,3983  },       
	{14 , 3970  },        
	{15 , 3962  },        
	{17 , 3952  },        
	{19 , 3940  },        
	{21 , 3928  },        
	{23 , 3917  },        
	{25 , 3905  },        
	{27 , 3895  },        
	{29 , 3884  },        
	{31 , 3870  },        
	{33 , 3861  },        
	{35 , 3848  },        
	{37 , 3837  },        
	{39 , 3825  },        
	{41 , 3814  },        
	{43 , 3807  },        
	{45 , 3801  },        
	{46 , 3795  },        
	{48 , 3792  },        
	{50 , 3788  },        
	{52 , 3788  },        
	{54 , 3786  },        
	{56 , 3785  },        
	{58 , 3781  },        
	{60 , 3779  },        
	{62 , 3776  },        
	{64 , 3775  },        
	{66 , 3775  },        
	{68 , 3773  },        
	{70  , 3772},         
	{72 , 3772  },        
	{74 , 3767  },        
	{76 , 3763  },        
	{77 , 3756  },        
	{79 , 3741  },        
	{81 , 3726  },        
	{83 , 3706  },        
	{85 , 3681  },        
	{87 , 3659  },        
	{89 , 3626  },        
	{91 , 3595  },        
  	{93 , 3570  },        
  	{95 , 3549  },        
  	{97 , 3526  },        
  	{99 , 3470  },        
	{100, 3362  },      
	{100, 3362  },      
  	{100, 3362  },      
	{100, 3362  },      
  	{100, 3362  },      
  	{100, 3362  },      
  	{100, 3362  },      
  	{100, 3362  },      
  	{100, 3362  }  
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0  , 4158 },
	{2  , 4114 },
	{4  , 4091 },
	{6  , 4078 },
	{7  , 4059 },
	{9  , 4037 },
	{11 , 4013 },
	{13 , 3996 },
	{15 , 3982 },
	{17 , 3972 },
	{18 , 3963 },
	{20 , 3952 },
	{22 , 3942 },
	{24 , 3930 },
	{26 , 3919 },
	{28 , 3908 },
	{29 , 3898 },
	{31 , 3887 },
	{33 , 3878 },
	{35  , 3868},         
	{37 , 3856 },
	{39  , 3842},         
	{40 , 3830 },
	{42 , 3818 },
	{44 , 3808 },
	{46 , 3802 },
	{48 , 3795 },
	{50 , 3790 },  
	{51 , 3786 }, 
	{53 , 3784 },
	{55 , 3782 },
	{57 , 3781 },  
	{59 , 3780 },
	{61 , 3780 },
	{62 , 3780 },
	{64 , 3778 },
	{66 , 3778 },
	{68 , 3777 },
	{70 , 3776 },
	{72 , 3774 },
	{73 , 3771 },
	{75 , 3768 },
	{77 , 3762 },
	{79 , 3753 },
	{81 , 3738 },
	{83 , 3718 },
	{85 , 3695 },
	{86 , 3667 },
  	{88 , 3632 },
  	{90 , 3598 },
  	{92 , 3571 },
  	{94 , 3547 },
  	{96 , 3527 },
  	{97 , 3503 },
  	{99 , 3448 },
  	{100, 3335 },
  	{100, 3335 },
  	{100, 3335 },
  	{100, 3335 },
  	{100, 3335 },
  	{100, 3335 }                 
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0  , 4166},
	{2  , 4145},
	{3  , 4129},
	{5  , 4115},
	{7  , 4102},
	{9  , 4089},
	{10 , 4077},
	{12  , 4065},         
	{14 , 4054},
	{16 , 4043},
	{17 , 4032},
	{19 , 4021},
	{21 , 4010},
	{22 , 4000},
	{24 , 3990},
	{26 , 3981},
	{28 , 3972},
	{29 , 3963},
	{31 , 3955},
	{33 , 3946},
	{35 , 3938},
	{36 , 3931},
	{38 , 3923},
	{40 , 3916},
	{41 , 3908},
	{43 , 3902},
	{45 , 3895},
	{47 , 3888},  
	{48 , 3882}, 
	{50 , 3875},
	{52 , 3867},
	{54 , 3859},  
	{55 , 3850},
	{57 , 3839},
	{59 , 3829},
	{60 , 3820},
	{62 , 3812},
	{64 , 3806},
	{66 , 3801},
	{67 , 3796},
	{69 , 3792},
	{71 , 3788},
	{73 , 3784},
	{74 , 3781},
	{76 , 3778},
	{78 , 3775},
	{79 , 3772},
	{81 , 3770},
  	{83 , 3768},
  	{85 , 3766},
  	{86 , 3764},
  	{88 , 3763},
  	{90 , 3762},
  	{92 , 3760},
  	{93 , 3759},
  	{95 , 3757},
  	{97 , 3754},
  	{99 , 3752},
  	{100, 3748},
  	{100, 3742},
  	{100, 3736}
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0  ,  4182 },
	{2   , 4160 },
	{3   , 4139 },
	{5   , 4120 },
	{7   , 4105 },
	{9   , 4086 },
	{10  , 4068 },
	{12  , 4054 },
	{14  , 4038 },
	{16  , 4020 },
	{17  , 4007 },
	{19  , 3993 },
	{21  , 3979 },
	{22  , 3966 },
	{24  , 3955 },
	{26  , 3941 },
	{28  , 3930 },
	{29  , 3919 },
	{31  , 3908 },
	{33  , 3899 },
	{34  , 3890 },
	{36  , 3878 },
	{38  , 3869 },
	{40  , 3862 },
	{41  , 3852 },
	{43  , 3842 },
	{45  , 3835 },
	{47  , 3819 },  
	{48  , 3806 }, 
	{50  , 3797 },
	{52  , 3786 },
	{53  , 3784 },  
	{55  , 3779 },
	{57  , 3773 },
	{59  , 3771 },
	{60  , 3770 },
	{62  , 3770 },
	{64  , 3767 },
	{65  , 3766 },
	{67  , 3765 },
	{69  , 3765 },
	{71  , 3764 },
	{72  , 3762 },
	{74  , 3754 },
	{76  , 3748 },
	{78  , 3744 },
	{79  , 3738 },
	{81  , 3729 },
	{83  , 3715 },
	{84  , 3699 },
	{86  , 3678 },
	{88  , 3654 },
	{90  , 3621 },
	{91  , 3588 },
	{93  , 3567 },
	{95  , 3544 },
	{96  , 3525 },
	{98  , 3490 },
	{100 , 3405 },
	{100 , 3272 },
	{100 , 3272 }

};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{363   ,  4155  },
	{442   ,  4135  },
	{454   ,  4098  },
	{527   ,  4052  },
	{595   ,  4018  },
	{620   ,  3996  },
	{637   ,  3983  },
	{650   ,  3970  },
	{662   ,  3962  },
	{664   ,  3952  },
	{671   ,  3940  },
	{674   ,  3928  },
	{680   ,  3917  },
	{682   ,  3905  },
	{685   ,  3895  },
	{688   ,  3884  },
	{679   ,  3870  },
	{686   ,  3861  },
	{675   ,  3848  },
	{676   ,  3837  },
	{669   ,  3825  },
	{666   ,  3814  },
	{668   ,  3807  },
	{672   ,  3801  },
	{675   ,  3795  },
	{679   ,  3792  },
	{684   ,  3788  },
	{694   ,  3788  },  
	{699   ,  3786  }, 
	{705   ,  3785  },
	{560   ,  3781  },
	{270   ,  3779  },  
	{213   ,  3776  },
	{196   ,  3775  },
	{185   ,  3775  },
	{182   ,  3773  },
	{185   ,  3772  },
	{189   ,  3772  },
	{182   ,  3767  },
	{182   ,  3763  },
	{186   ,  3756  },
	{174   ,  3741  },
	{177   ,  3726  },
	{185   ,  3706  },
	{179   ,  3681  },
	{196   ,  3659  },
	{187   ,  3626  },
	{178   ,  3595  },
  	{187   ,  3570  },
  	{202   ,  3549  },
  	{215   ,  3526  },
  	{204   ,  3470  },
  	{218   ,  3362  },
  	{712   ,  3362  },
  	{712   ,  3362  },
  	{712   ,  3362  },
  	{712   ,  3362  },
  	{712   ,  3362  },
  	{712   ,  3362  },
  	{712   ,  3362  },
        {712   ,   3362  }
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{233      ,  4158  },
	{276      ,  4114  },
	{300      ,  4091  },
	{314      ,  4078  },
	{319      ,  4059  },
	{326      ,  4037  },
	{330      ,  4013  },
	{336      ,  3996  },
	{340      ,  3982  },
	{350      ,  3972  },
	{356      ,  3963  },
	{361      ,  3952  },
	{364      ,  3942  },
	{367      ,  3930  },
	{370      ,  3919  },
	{373      ,  3908  },
	{378      ,  3898  },
	{376      ,  3887  },
	{378      ,  3878  },
	{378      ,  3868  },
	{371      ,  3856  },
	{357      ,  3842  },
	{350      ,  3830  },
	{340      ,  3818  },
	{333      ,  3808  },
	{333      ,  3802  },
	{331      ,  3795  },
	{331      ,  3790  },  
	{335      ,  3786  }, 
	{338      ,  3784  },
	{343      ,  3782  },
	{346      ,  3781  },  
	{350      ,  3780  },
	{358      ,  3780  },
	{360      ,  3780  },
	{363      ,  3778  },
	{369      ,  3778  },
	{373      ,  3777  },
	{377      ,  3776  },
	{382      ,  3774  },
	{385      ,  3771  },
	{393      ,  3768  },
	{399      ,  3762  },
	{404      ,  3753  },
	{416      ,  3738  },
	{426      ,  3718  },
	{436      ,  3695  },
	{438      ,  3667  },
  	{426      ,  3632  },
  	{415      ,  3598  },
  	{424      ,  3571  },
  	{446      ,  3547  },
  	{496      ,  3527  },
  	{571      ,  3503  },
  	{719      ,  3448  },
  	{1391     ,  3335  },
  	{1391     ,  3335  },
  	{1391     ,  3335  },
  	{1391     ,  3335  },
  	{1391     ,  3335  },
  	{1391     ,  3335  }
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{150      ,  4182 },
	{146      ,  4157 },
	{151      ,  4139 },
	{150      ,  4118 },
	{155      ,  4101 },
	{152      ,  4084 },
	{160      ,  4068 },
	{160      ,  4053 },
	{160      ,  4036 },
	{163      ,  4019 },
	{161      ,  4003 },
	{167      ,  3990 },
	{171      ,  3978 },
	{175      ,  3967 },
	{175      ,  3953 },
	{179      ,  3942 },
	{183      ,  3931 },
	{185      ,  3920 },
	{187      ,  3908 },
	{195      ,  3900 },
	{199      ,  3890 },
	{202      ,  3881 },
	{209      ,  3873 },
	{216      ,  3865 },
	{218      ,  3857 },
	{206      ,  3843 },
	{193      ,  3831 },
	{179      ,  3818 },  
	{169      ,  3806 }, 
	{161      ,  3799 },
	{161      ,  3791 },
	{151      ,  3785 },  
	{151      ,  3781 },
	{150      ,  3778 },
	{155      ,  3778 },
	{156      ,  3777 },
	{157      ,  3775 },
	{161      ,  3775 },
	{160      ,  3773 },
	{163      ,  3772 },
	{162      ,  3771 },
	{168      ,  3770 },
	{172      ,  3770 },
	{171      ,  3766 },
	{173      ,  3764 },
	{175      ,  3760 },
	{174      ,  3751 },
	{175      ,  3740 },
  	{174      ,  3723 },
  	{184      ,  3705 },
  	{191      ,  3681 },
  	{198      ,  3654 },
  	{187      ,  3616 },
  	{174      ,  3584 },
  	{182      ,  3561 },
  	{194      ,  3542 },
  	{212      ,  3524 },
  	{212      ,  3483 },
  	{222      ,  3390 },
  	{265      ,  3241 },
  	{1588     ,  3241 }
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{123     ,  4182 },
	{126     ,  4160 },
	{128     ,  4139 },
	{126     ,  4120 },
	{134     ,  4105 },
	{132     ,  4086 },
	{129     ,  4068 },
	{136     ,  4054 },
	{135     ,  4038 },
	{126     ,  4020 },
	{136     ,  4007 },
	{137     ,  3993 },
	{137     ,  3979 },
	{141     ,  3966 },
	{145     ,  3955 },
	{145     ,  3941 },
	{145     ,  3930 },
	{150     ,  3919 },
	{153     ,  3908 },
	{151     ,  3899 },
	{157     ,  3890 },
	{160     ,  3878 },
	{166     ,  3869 },
	{174     ,  3862 },
	{173     ,  3852 },
	{174     ,  3842 },
	{178     ,  3835 },
	{162     ,  3819 },  
	{145     ,  3806 }, 
	{144     ,  3797 },
	{130     ,  3786 },
	{138     ,  3784 },  
	{136     ,  3779 },
	{132     ,  3773 },
	{131     ,  3771 },
	{136     ,  3770 },
	{140     ,  3770 },
	{140     ,  3767 },
	{141     ,  3766 },
	{144     ,  3765 },
	{150     ,  3765 },
	{149     ,  3764 },
	{153     ,  3762 },
	{142     ,  3754 },
	{139     ,  3748 },
	{140     ,  3744 },
	{145     ,  3738 },
	{150     ,  3729 },
  	{146     ,  3715 },
  	{147     ,  3699 },
  	{153     ,  3678 },
  	{158     ,  3654 },
  	{154     ,  3621 },
  	{149     ,  3588 },
  	{158     ,  3567 },
  	{164     ,  3544 },
  	{170     ,  3525 },
  	{170     ,  3490 },
  	{170     ,  3405 },
  	{196     ,  3272 },
  	{905     ,  3272 }  	
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

